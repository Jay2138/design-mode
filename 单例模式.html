<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    /**
     * 划分命名空间，并将属性和方法组织在一起的一种方式
     * 只是实例话一次(区别只能实例化一次，new一次)，每次返回的实例都是同一对象
     */

    function Singleton(name) {
      this.name = name
    }

    Singleton.prototype.getName = function () {
      console.log(this.name);
    }

    // 获取实例
    // function getInstance(name) {
    //   // 这里this指向window
    //   if(!this.instance) {
    //     // 实例话一次
    //     this.instance = new Singleton(name)
    //   }
    //   return this.instance
    // }
    // 在window绑定变量不行，利用闭包创建局部变量
    // var getInstance = (function () {
    //   var instance
    //   return function (name) {
    //     if (!instance) {
    //       // 实例化一次
    //       instance = new Singleton(name)
    //     }

    //     return instance
    //   }
    // })()
    Singleton.getInstance = function (name) {

      if (!this.instance) {
        // 实例化一次
        this.instance = new Singleton(name)
      }

      return this.instance

    }
    var a = Singleton.getInstance('Bob')
    var b = Singleton.getInstance('Lisa')
    console.log(a);
    console.log(b);
    console.log(a === b)
    /**
     * 单例的本质通过一个变量来储存实例，通过判断这个变量是否有值，来判断是否返回实例本身
     */
  </script>
</body>

</html>